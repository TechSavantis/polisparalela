<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <meta charset="utf-8" />
    
    
    
    
    <base href="/">
    <link rel="preload" href="webfonts/34C79D_0_0.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="webfonts/34C79D_1_0.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="stylesheet" href="css/main.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
    <meta name="apple-mobile-web-app-title" content="Polis Paralela">
    <meta name="application-name" content="Polis Paralela">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="theme-color" content="#000000">
    <meta name="msvalidate.01" content="F21C36C6208514475B51C052A74397CE" />

    <title>Polis Paralela site relaunch: Building our JAMstack site | Polis Paralela | Web Design Sussex</title>
    <meta name="description" content="Our new site runs quickly, anywhere in the world, regardless of internet connectivity." />

    <link rel="canonical" href="//thinks/tomango-progressive-web-app/" />
    <meta property="og:site_name" content="Polis Paralela" />
    <meta property="og:locale" content="en_GB" />
    <meta property="article:publisher" content="https://www.facebook.com/polisparalelaUK" />
    <meta name="twitter:site" content="@polisparalelaUK" />
    <meta name="twitter:creator" content="@polisparalelaUK" />

    <meta property="og:url" content="//thinks/tomango-progressive-web-app/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Polis Paralela site relaunch: Building our JAMstack site | Polis Paralela | Web Design Sussex" />
    <meta property="og:description" content="Our new site runs quickly, anywhere in the world, regardless of internet connectivity." />
    <meta property="og:image" content="//images/og.jpg" />
    <meta property="og:image:alt" content="Polis Paralela" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Polis Paralela site relaunch: Building our JAMstack site | Polis Paralela | Web Design Sussex" />
    <meta name="twitter:description" content="Our new site runs quickly, anywhere in the world, regardless of internet connectivity." />
    <meta name="twitter:image" content="//images/og.jpg" />
    
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2018-05-03 09:26:00 &#43;0000 UTC" />
    <meta property="article:modified_time" content="2018-05-03 09:26:00 &#43;0000 UTC" />
    <meta property="og:updated_time" content="2018-05-03 09:26:00 &#43;0000 UTC" />
    
    <meta property="article:section" content="Web design" />
    
    <meta name="twitter:label1" value="Written by" />
    <meta name="twitter:data1" value="Trys Mudford" />
    
    <meta name="twitter:label2" value="Reading time" />
    <meta name="twitter:data2" value="8 minutes" />
    
  
    
    <script type='application/ld+json'>{"@context":"http:\/\/schema.org","@type":"WebSite","@id":"#website","url":"https:\/\/www.polisparalela.co.uk\/","name":"Polis Paralela"}</script>
    <script type='application/ld+json'>{"@context":"http:\/\/schema.org","@type":"Organization","url":"https:\/\/www.polisparalela.co.uk\/","sameAs":["https:\/\/www.facebook.com\/polisparalelaUK","https:\/\/www.instagram.com\/polisparalelaUK\/","https:\/\/www.linkedin.com\/company\/polisparalela","https:\/\/twitter.com\/polisparalelaUK"],"@id":"#organization","name":"Polis Paralela","logo":"//images/og.jpg"}</script>

    <style>
      @font-face {
        font-family: NeueHaasGrotesk;
        src: url('webfonts/34C79D_0_0.woff2') format('woff2'),
             url('webfonts/34C79D_0_0.woff') format('woff');
        font-weight: 400;
        font-style: normal;
      }
      @font-face {
        font-family: NeueHaasGrotesk;
        src: url('webfonts/34C79D_1_0.woff2') format('woff2'),
             url('webfonts/34C79D_1_0.woff') format('woff');
        font-weight: 700;
        font-style: normal;
      }

      body {
        font-family: 'Helvetica', sans-serif;
      }
      .fonts-loaded body {
        font-family: 'NeueHaasGrotesk', sans-serif;
        font-weight: 400;
        font-style: normal;
      }
    </style>
    <script>
      if(sessionStorage.foutFontsLoaded) document.documentElement.className += " fonts-loaded";
    </script>
    
  </head>
  <body>

    <header role="banner" class="top bw top--blog">
      <div class="top-contact">
        <a href="/" class="logo"><strong>Polis Paralela</strong></a>
        <a href="#navigation" class="navicon" aria-label="Go To Navigation"><i></i><i></i><i></i></a>
      </div>

      
        <div class="top-content wrap">
          
	<h1>Polis Paralela site relaunch: Building our JAMstack site</h1>
	
		<h3>By Trys Mudford &nbsp; &nbsp; &nbsp; <time datetime="2018-05-03 09:26:00 &#43;0000 UTC">
3rd May 2018
</time></h3>
	

        </div>
      

      <nav id="navigation" role="navigation" aria-label="main navigation" class="top-nav bw">
        <div class="top-nav-wrapper">
          <div class="wrap wrap--content">
            <a href="/created/">Our work</a>
            <a href="/is/">About</a>
            <a href="/creates/">What we do</a>
            <a href="/thinks/">Blog</a>
            <a href="/contact/">Contact</a>
          </div>
        </div>
      </nav>
    </header>


    <main class="main" role="main">
      
	<div class="wrap three-col insulate">
		<aside>
			
				<img src="images/team/thumbnail/trys.jpg" alt="Trys Mudford">
			
		</aside>
		<aside>
			
				<a class="traverse" href="/thinks/meet-our-new-designer-liam-cornford/"><img src="images/traverse.svg" alt="Next Post"></a>
			
			
			
				<a class="traverse" href="/thinks/blue-notes-international-jazz-day/"><img src="images/traverse.svg" alt="Next Post"></a>
			
		</aside>
		<div class="content content--blog">
			

<p>On the 1st May 2018, we launched the latest Polis Paralela website. To represent our change in business approach and new brand, the site was designed to be confident, clear and quick. Confidence meant stripping away the fluff, leaving only the clearest message possible.</p>

<p>This ethos was applied to the brand, copy and site design — so it was only natural for it to extend to the development, and this focus lead to great performance.</p>

<p>I&rsquo;m going to dive into some of the technical decisions made building this site in this post.</p>

<hr />

<h2 id="hugo">Hugo</h2>

<p>Hugo is our static site generator (SSG) of choice. It&rsquo;s <strong>really quick</strong>. After using it on a number of client projects, it became clear that our new site <em>had</em> to be built with Hugo.</p>

<p>The big benefit of an SSG, is how it moves all the heavy lifting to the build time.</p>

<p>For example in WordPress, all the category pages are created at runtime, generating a lot of database queries. In Hugo, the paginated category pages are created at build time - so all the computational complexity is done once, and doesn&rsquo;t impact the user at all.</p>

<p>Similarly, instead of running a live, or even a heavily cached Instagram feed that checked for new photos on page load, we used IFTTT to flip the feature to work performantly. I&rsquo;ve <a href="https://www.trysmudford.com/blog/making-the-static-dynamic-instagram-importer/">written about it</a> in detail on my blog but in essence: IFTTT sends a webhook to a Netlify Cloud Function every time a photo is uploaded. The function scrapes the photo and commits it to our GitHub repo which triggers a Hugo build on Netlify, deploying the site immediately!</p>

<p>Shortcodes allow copy editors to continue using WordPress-esque features, Markdown keeps our developers happy, and our users don&rsquo;t have any of the database overheads. It&rsquo;s win-win!</p>

<h2 id="keeping-assets-to-a-minimum">Keeping assets to a minimum</h2>

<p>The design for this site was certainly conducive to performance. <a href="/is/mike-vine/">Mike</a> had prioritised content readability, so once the typesetting had been completed the rest of the design flowed very easily. By using the cascade and inheritance, the CSS ended up being pretty lean, weighing in at <strong>5.8 KB</strong>.</p>

<p>JavaScript usage was kept to an absolute minimum, handling four tasks:</p>

<ul>
<li>Font loading</li>
<li>Menu interaction</li>
<li>Form validation</li>
<li>Event tracking</li>
</ul>

<p>The total: <strong>2.8 KB</strong>.</p>

<h2 id="brand">Brand</h2>

<p>It was only a simple thing that saved one HTTP request, but by kerning the font in CSS, the logo could be text, not an image or SVG.</p>

<h2 id="fonts">Fonts</h2>

<p>When it comes to web fonts, <a href="https://www.zachleat.com/web/">Zach Leatherman</a> is the don. His <a href="https://www.zachleat.com/web/comprehensive-webfonts/">comprehensive guide to font loading strategies</a> informed most of the decisions for web fonts on this site.</p>

<p>As a great starting point, there is only one web font with two weights in the design. The fonts are preloaded, letting the browser know to load them as soon as possible:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;preload&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;webfonts/neuehaasgrotesk.woff2&#34;</span> <span class="na">as</span><span class="o">=</span><span class="s">&#34;font&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;font/woff2&#34;</span> <span class="na">crossorigin</span><span class="p"></span><span class="p">&gt;</span></code></pre></div>
<p>Then, the page is loaded with the system font Helvetica to ensure a quick render.</p>

<p>The <code>FontFaceObserver</code> API tracks when fonts are ready to use, to keep flashes of invisible text to a minimum. Note, the <code>sessionStorage</code> check at the start. Once the fonts have been loaded into the cache, we don&rsquo;t need to use the <code>FontFaceObserver</code> each load.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="k">import</span> <span class="nx">FontFaceObserver</span> <span class="nx">from</span> <span class="s1">&#39;fontfaceobserver&#39;</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">foutFontsLoaded</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">fontA</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FontFaceObserver</span><span class="p">(</span><span class="s1">&#39;NeueHaasGrotesk&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">weight</span><span class="o">:</span> <span class="mi">400</span>
  <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">fontB</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FontFaceObserver</span><span class="p">(</span><span class="s1">&#39;NeueHaasGrotesk&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">weight</span><span class="o">:</span> <span class="mi">700</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">loadFonts</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s2">&#34; fonts-loaded&#34;</span><span class="p">;</span>
    <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">foutFontsLoaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">fontA</span><span class="p">.</span><span class="nx">load</span><span class="p">(),</span> <span class="nx">fontB</span><span class="p">.</span><span class="nx">load</span><span class="p">()]).</span><span class="nx">then</span><span class="p">(</span><span class="nx">loadFonts</span><span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="nx">loadFonts</span><span class="p">);</span>
<span class="p">})();</span></code></pre></div>
<p>Next up, the CSS loads the fonts with the classic <code>@font-face</code> method. It only applies the new font when the class <code>.fonts-loaded</code> has been applied.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">style</span><span class="p"></span><span class="p">&gt;</span>
  <span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="nt">NeueHaasGrotesk</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;webfonts/34C79D_0_0.woff2&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;woff2&#39;</span><span class="o">),</span>
         <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;webfonts/34C79D_0_0.woff&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;woff&#39;</span><span class="o">);</span>
    <span class="nt">font-weight</span><span class="o">:</span> <span class="nt">400</span><span class="o">;</span>
    <span class="nt">font-style</span><span class="o">:</span> <span class="nt">normal</span><span class="o">;</span>
  <span class="p">}</span>
  <span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="nt">NeueHaasGrotesk</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;webfonts/34C79D_1_0.woff2&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;woff2&#39;</span><span class="o">),</span>
         <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;webfonts/34C79D_1_0.woff&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;woff&#39;</span><span class="o">);</span>
    <span class="nt">font-weight</span><span class="o">:</span> <span class="nt">700</span><span class="o">;</span>
    <span class="nt">font-style</span><span class="o">:</span> <span class="nt">normal</span><span class="o">;</span>
  <span class="p">}</span>

  <span class="nt">body</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s1">&#39;Helvetica&#39;</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">.</span><span class="nc">fonts-loaded</span> <span class="nt">body</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s1">&#39;NeueHaasGrotesk&#39;</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="mi">400</span><span class="p">;</span>
    <span class="k">font-style</span><span class="p">:</span> <span class="kc">normal</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p"></span><span class="p">&gt;</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">foutFontsLoaded</span><span class="p">)</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s2">&#34; fonts-loaded&#34;</span><span class="p">;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">script</span><span class="p">&gt;</span></code></pre></div>
<p>There are still gains to be made with subsetting and variable fonts, both of which will be experimented with in coming months.</p>

<h2 id="svg-custom-properties">SVG &amp; Custom properties</h2>

<p>The new brand included a pattern to be used on the header of each page. SVG was the perfect candidate for tackling this. The pattern was split into two sections: repeating lines &amp; an overlay. The repeating lines were consistent on each page whereas the overlay could change from page to page. CSS custom properties helped keep the code as lean as possible, I&rsquo;ve <a href="https://www.trysmudford.com/blog/using-css-custom-properties/">written about this</a> in detail on my blog.</p>

<h2 id="netlify-cms">Netlify CMS</h2>

<p>From past WordPress experience, too much emphasis is put on making everything editable, to the detriment of page speed and code cleanliness. To that end, we opted to only make the blog &lsquo;CMS-able&rsquo;.</p>

<p><a href="https://www.netlifycms.org/">NetlifyCMS</a> is an open source CMS that plays nicely with Hugo. Instead of installing a monolithic framework and database, it lives as a single-page React app in the <code>static</code> directory. You create a config file outlining which content is editable and where images should be stored.</p>

<p>Other than the config file, the only &lsquo;custom&rsquo; code required was a checkbox component for categories. It&rsquo;s <a href="https://github.com/trys/polisparalela-2018/blob/master/src/js/cms/fields/checkbox.js">available here</a>, should you wish to peruse.</p>

<h2 id="progressive-web-app">Progressive Web App</h2>

<p>Service Workers have been gaining popularity for several years, and they&rsquo;ve recently landed in Safari &amp; Edge. Thanks to their progressively enhanced nature, they&rsquo;ve been available to many users for quite a while.</p>

<p>With a service worker, you take control of network requests going to and from the browser, and have access to the browser cache. These two items combined allow websites to work offline!</p>

<p><a href="/sw.js">Our service worker</a> does some initial route caching on first load, to ensure you have the key pages available from the get-go. Then it caches each page as you navigate the website. If your network connectivity drops, you&rsquo;ll still be able to browse the key pages and all previously viewed articles.</p>

<p>We&rsquo;re using a network-first, cache-fallback approach. It does mean flaky connections won&rsquo;t be as quick as a cache-first setup, but it does make cache invalidation much more straightforward. Teamed with Netlify&rsquo;s <a href="https://www.trysmudford.com/blog/performance-wins-with-hugo-and-netlify/">great caching technology</a>, it&rsquo;s a great solution.</p>

<p>Huge thanks to <a href="https://adactio.com/">Jeremy Keith</a> and <a href="https://ethanmarcotte.com/">Ethan Marcotte</a> for their service worker inspiration.</p>

<h2 id="related-content">Related content</h2>

<p>The design had a requirement for related projects on any page. In WordPress, I&rsquo;d tend to set up a &lsquo;relationship&rsquo; field in ACF. In Hugo, it took a little more work. The &lsquo;front matter&rsquo; (page meta data) needed to identify which projects were related, and by using the page slug, it worked like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">related:
<span class="k">-</span> concept-tag<span class="err">
</span><span class="err"></span>- hop</code></pre></div>
<p>In the template, it checks for the related front matter field, loops through each one, and outputs the HTML. Again, this heavy lifting is done a build time, not runtime, so our users don&rsquo;t pay the performance price.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">{{ if .Params.related }}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;related&#34;</span><span class="p"></span><span class="p">&gt;</span>
    {{ range $index, $element := .Params.related }}
      {{ with $.Site.GetPage &#34;page&#34; &#34;created&#34; (printf &#34;%s.md&#34; $element) }}
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .URL }}&#34;</span><span class="p"></span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h3</span><span class="p"></span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;</span><span class="p">/</span><span class="nt">h3</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ .Params.image }}&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;{{ .Title }}&#34;</span><span class="p"></span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="p">/</span><span class="nt">a</span><span class="p">&gt;</span>
      {{ end }}
    {{ end }}
  <span class="p">&lt;</span><span class="p">/</span><span class="nt">div</span><span class="p">&gt;</span>
{{ end }}</code></pre></div>
<h2 id="structured-data">Structured data</h2>

<p>Improving our structured data was one of the minor goals of this project. Building that into Hugo can get a little cumbersome but creating variables worked out really nicely, especially for handling Netlify&rsquo;s <a href="https://github.com/netlify/victor-hugo/pull/74">deploy preview URLs</a>. The full header code can be <a href="https://github.com/trys/polisparalela-2018/blob/master/site/layouts/_default/baseof.html">seen here</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="p">{{</span> <span class="err">$</span><span class="nx">url</span> <span class="o">:=</span> <span class="nx">getenv</span> <span class="p">(</span><span class="nx">cond</span> <span class="p">(</span><span class="nx">eq</span> <span class="s">&#34;production&#34;</span> <span class="p">(</span><span class="nx">getenv</span> <span class="s">&#34;CONTEXT&#34;</span><span class="p">))</span> <span class="s">&#34;URL&#34;</span> <span class="s">&#34;DEPLOY_PRIME_URL&#34;</span> <span class="p">)</span> <span class="p">|</span> <span class="k">default</span> <span class="p">(</span><span class="nx">cond</span> <span class="p">(</span><span class="nx">eq</span> <span class="s">&#34;//localhost:1313/&#34;</span> <span class="p">(</span><span class="nx">printf</span> <span class="s">&#34;%s&#34;</span> <span class="err">$</span><span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">BaseURL</span><span class="p">))</span> <span class="s">&#34;//localhost:1313&#34;</span> <span class="err">$</span><span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">BaseURL</span><span class="p">)</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="err">$</span><span class="nx">title</span> <span class="o">:=</span> <span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">seo_title</span> <span class="p">|</span> <span class="k">default</span> <span class="p">(</span><span class="nx">printf</span> <span class="s">&#34;%s | %s&#34;</span> <span class="p">.</span><span class="nx">Title</span> <span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">Title</span><span class="p">)</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="err">$</span><span class="nx">desc</span> <span class="o">:=</span> <span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">seo_description</span> <span class="p">|</span> <span class="k">default</span> <span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">Description</span> <span class="p">|</span> <span class="k">default</span> <span class="p">(</span><span class="nx">printf</span> <span class="s">&#34;%s | %s | Strategy | Brand | Web | Digital Marketing&#34;</span> <span class="p">.</span><span class="nx">Title</span> <span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">Title</span><span class="p">)</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="err">$</span><span class="nx">image</span> <span class="o">:=</span> <span class="nx">printf</span> <span class="s">&#34;%s%s&#34;</span> <span class="err">$</span><span class="nx">url</span> <span class="p">(.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">image</span> <span class="p">|</span> <span class="k">default</span> <span class="s">&#34;images/og.jpg&#34;</span> <span class="p">|</span> <span class="nx">relURL</span><span class="p">)</span> <span class="p">}}</span></code></pre></div>
<p><img src="images/blog/structured-data.jpg" alt="" /></p>

<h2 id="images">Images</h2>

<p>On the whole, we manually resized and optimised images where needed. But for the blog, it&rsquo;s not fair to assume a copy editor will have photoshop installed. That&rsquo;s where Cloudinary steps in. They have a hugely generous free tier that includes external image requests.</p>

<p>Using the following URL, Cloudinary serves a 600px wide image scraped from the website. No server-side resizing required!</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">res</span><span class="p">.</span><span class="nx">cloudinary</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="p">[</span><span class="nx">account</span><span class="p">]</span><span class="o">/</span><span class="nx">image</span><span class="o">/</span><span class="nx">fetch</span><span class="o">/</span><span class="nx">w_600</span><span class="o">/</span><span class="p">[</span><span class="nx">url</span><span class="p">]{{</span> <span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">image</span> <span class="p">}}</span></code></pre></div>
<h2 id="netlify">Netlify</h2>

<p>Finally, the biggest piece of the puzzle, hosting with Netlify. I think most of my colleagues are sick of hearing me wax lyrical about them, but I can&rsquo;t get over how good their service is. I&rsquo;ve never come across a company like it.</p>

<p>We&rsquo;ve moved from a single dedicated server in Surrey, to a global content delivery network with Git integration, server-side builds, cloud functions, instant cache invalidation, brilliant support and a great admin system.</p>

<blockquote>
<p>Our site now runs quickly, anywhere in the world, regardless of internet connectivity.</p>
</blockquote>

<p>It&rsquo;s incredible, I can&rsquo;t get over how much of a difference this has made to the websites we create.</p>

<h2 id="the-code">The Code</h2>

<p>Now there&rsquo;s no database running our website, and no FTP in sight, we can finally rely on Git. We&rsquo;ve even made the <a href="https://github.com/trys/polisparalela-2018">repository public</a> if you fancy a look.</p>

<p>Our intention is to keep working on the site, personally I&rsquo;m keen to keep finding performance gains!</p>

			
			<aside class="signup-form">
				<h2>Get tips and advice straight to your inbox</h2>
				<p>Sign up to receive Polis Paralela's weekly email—containing ideas, techniques and tips to help you grow your business by maximising your brand and online presence.</p>
				<form action="https://www.getdrip.com/forms/107702195/submissions" method="post" class="drip-form" data-drip-embedded-form="107702195">
	<div class="clear">
		<div>
			<label for="drip-email">Your email address *</label>
			<input id="drip-email" name="fields[email]" type="email" value="" />
		</div>
		<div><input name="submit" type="submit" class="button" value="Join the list" /></div>
	</div>
</form>

<small style="line-height: 1.4; display: block;">You can unsubscribe in one click, and we'll never share your email address.<br><u><a href="/privacy/">Our Privacy policy</a></u>.</small>

			</aside>
		</div>
	</div>
	
	
	
	
	<script type='application/ld+json'>
		{
			"@context":"http:\/\/schema.org",
			"description": "Our new site runs quickly, anywhere in the world, regardless of internet connectivity.",
			"dateModified": "2018-05-03 09:26:00 &#43;0000 UTC",
			"alternativeHeadline": "Polis Paralela site relaunch: Building our JAMstack site",
			"headline": "Polis Paralela site relaunch: Building our JAMstack site",
			"datePublished": "2018-05-03 09:26:00 &#43;0000 UTC",
			"@type": "NewsArticle",
			"mainEntityOfPage": {
				"@type": "WebPage",
				"@id": "//thinks/tomango-progressive-web-app/"
			},
			"articleSection": "Web design",
			"url": "//thinks/tomango-progressive-web-app/",
			"author": {
				"@type": "Person",
				"name": "Trys Mudford"
			},
			"publisher": {
				"name": "Polis Paralela",
				"@type": "Organization",
				"logo": {
					"@type": "ImageObject",
					"url": "//images/og.jpg"
				}
			},
			"image": "//images/og.jpg"
		}
	</script>

    </main>

    


    

    <aside class="cta insulate--mid">
        <div class="wrap wrap--content">
            <h3>Ready to get started?</h3>
            <h2>Let's grow your business</h2>
            <a href="/contact/" class="button">Get in touch</a>
        </div>
    </aside>


      
    <footer role="contentinfo" class="wrap">
  <div class="low clear">
    <a class="logo" href="/"><strong>Polis Paralela</strong></a>
    <ul class="low-group">
      <li class="low-address">
        <ul>
          <li>
            <a href="/creates/strategy/">Strategy</a>
          </li>
          <li>
            <a href="/creates/brand/">Brand</a>
          </li>
          <li>
            <a href="/creates/web/">Web</a>
          </li>
          <li>
            <a href="/creates/online-marketing/">Digital Marketing</a>
          </li>
        </ul>
      </li>
      <li class="low-contact">
        <ul>
          <li>
            <a rel="me" href="mailto:hello@polisparalela.com">hello@polisparalela.com</a>
          </li>
          <li><br></li>
          <li>
            <a href="/contact/">Contact us</a>
          </li>
        </ul>
      </li>
      <li class="low-social">
        <ul>
          <li>
            <a rel="me" href="https://twitter.com/polisparalelaUK"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill-rule="nonzero" d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.37-1.337.64-2.085.79-.598-.64-1.45-1.04-2.396-1.04-1.812 0-3.282 1.47-3.282 3.28 0 .26.03.51.085.75-2.728-.13-5.147-1.44-6.766-3.42C.83 2.58.67 3.14.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.41-.02-.61-.058.42 1.304 1.63 2.253 3.07 2.28-1.12.88-2.54 1.404-4.07 1.404-.26 0-.52-.015-.78-.045 1.46.93 3.18 1.474 5.04 1.474 6.04 0 9.34-5 9.34-9.33 0-.14 0-.28-.01-.42.64-.46 1.2-1.04 1.64-1.7z "></path></svg><span>Twitter</span></a>
          </li>
          
          <li>
            <a rel="me" href="https://www.instagram.com/polisparalelaUK/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill-rule="nonzero" d="M8 0C5.827 0 5.555.01 4.702.048 3.85.088 3.27.222 2.76.42c-.526.204-.973.478-1.417.923-.445.444-.72.89-.923 1.417-.198.51-.333 1.09-.372 1.942C.008 5.555 0 5.827 0 8s.01 2.445.048 3.298c.04.852.174 1.433.372 1.942.204.526.478.973.923 1.417.444.445.89.72 1.417.923.51.198 1.09.333 1.942.372.853.04 1.125.048 3.298.048s2.445-.01 3.298-.048c.852-.04 1.433-.174 1.942-.372.526-.204.973-.478 1.417-.923.445-.444.72-.89.923-1.417.198-.51.333-1.09.372-1.942.04-.853.048-1.125.048-3.298s-.01-2.445-.048-3.298c-.04-.852-.174-1.433-.372-1.942-.204-.526-.478-.973-.923-1.417-.444-.445-.89-.72-1.417-.923-.51-.198-1.09-.333-1.942-.372C10.445.008 10.173 0 8 0zm0 1.44c2.136 0 2.39.01 3.233.048.78.036 1.203.166 1.485.276.374.145.64.318.92.598.28.28.453.546.598.92.11.282.24.705.276 1.485.038.844.047 1.097.047 3.233s-.01 2.39-.05 3.233c-.04.78-.17 1.203-.28 1.485-.15.374-.32.64-.6.92-.28.28-.55.453-.92.598-.28.11-.71.24-1.49.276-.85.038-1.1.047-3.24.047s-2.39-.01-3.24-.05c-.78-.04-1.21-.17-1.49-.28-.38-.15-.64-.32-.92-.6-.28-.28-.46-.55-.6-.92-.11-.28-.24-.71-.28-1.49-.03-.84-.04-1.1-.04-3.23s.01-2.39.04-3.24c.04-.78.17-1.21.28-1.49.14-.38.32-.64.6-.92.28-.28.54-.46.92-.6.28-.11.7-.24 1.48-.28.85-.03 1.1-.04 3.24-.04zm0 2.452c-2.27 0-4.108 1.84-4.108 4.108 0 2.27 1.84 4.108 4.108 4.108 2.27 0 4.108-1.84 4.108-4.108 0-2.27-1.84-4.108-4.108-4.108zm0 6.775c-1.473 0-2.667-1.194-2.667-2.667 0-1.473 1.194-2.667 2.667-2.667 1.473 0 2.667 1.194 2.667 2.667 0 1.473-1.194 2.667-2.667 2.667zm5.23-6.937c0 .53-.43.96-.96.96s-.96-.43-.96-.96.43-.96.96-.96.96.43.96.96z "></path></svg><span>Instagram</span></a>
          </li>

          <li>
            <a rel="me" href="https://www.facebook.com/polisparalelaUK/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 32 32"><path d="M19 6h5v-6h-5c-3.86 0-7 3.14-7 7v3h-4v6h4v16h6v-16h5l1-6h-6v-3c0-0.542 0.458-1 1-1z"></path></svg><span>Facebook</span></a>
          </li>
          
          <li>
            <a rel="me" href="https://www.linkedin.com/company/polisparalela">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 32 32"><path d="M12 12h5.535v2.837h0.079c0.77-1.381 2.655-2.837 5.464-2.837 5.842 0 6.922 3.637 6.922 8.367v9.633h-5.769v-8.54c0-2.037-0.042-4.657-3.001-4.657-3.005 0-3.463 2.218-3.463 4.509v8.688h-5.767v-18z"></path><path d="M2 12h6v18h-6v-18z"></path><path d="M8 7c0 1.657-1.343 3-3 3s-3-1.343-3-3c0-1.657 1.343-3 3-3s3 1.343 3 3z"></path><span>LinkedIn</span></svg>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  <small class="copyright">
    &copy; Polis Paralela 2018 <a href="/careers/">Careers</a> <a href="/privacy/">Privacy</a>
  </small>
</footer>


    <script src="app.js" async defer></script>
    
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", function(user) {
          if (!user) {
            window.netlifyIdentity.on("login", function() {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
    
      <script>
        if (navigator.serviceWorker) {
            navigator.serviceWorker.register('/sw.js', {
                scope: '/'
            });
            window.addEventListener('load', function() {
                if (navigator.serviceWorker.controller) {
                    navigator.serviceWorker.controller.postMessage({'command': 'trimCaches'});
                }
            });
        }
      </script>
    
  </body>
</html>
